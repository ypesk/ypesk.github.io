/* Basic Reset */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* CSS Variables for Theming */
:root {
    /* Light Mode - Enhanced Contrast & Polish */
    --bg-color: #f8f9fa;
    --text-color: #212529;
    --secondary-text-color: #5a6268;
    --link-color: #0056b3; /* Darker base blue */
    --link-hover-color: #003d80; /* Even darker hover */
    --header-color: #2c3e50;
    --accent-color: #0056b3; /* Match darker base blue */
    --accent-color-light: #dbe6f0; /* Lighter, less saturated blue/grey */
    --border-color: #cbd3da; /* Slightly softer grey border */
    --container-bg: #ffffff; /* Keep main content white */
    --sidebar-bg: #ffffff; /* Slightly different grey for sidebar */
    --container-shadow: 0 4px 15px rgba(0, 0, 0, 0.06); /* Softer shadow */
    --button-bg: #e9ecef;
    --button-text: #343a40;
    --button-hover-bg: #ced4da;
    --profile-pic-border: #ced4da;
    --tag-bg: #e7f0f7; /* Light blue background */
    --tag-text: #004085; /* Dark blue text */
    --tag-border: #b8d4ef; /* Slightly darker blue border */
    --tag-hover-bg: var(--accent-color);
    --tag-hover-text: #ffffff;
    --tag-hover-border: var(--accent-color);
    --award-icon-color: #e69900; /* Slightly desaturated gold */
    --separator-color: #dee2e6; /* Lighter separator */
    --sticky-header-bg: rgba(255, 255, 255, 0.85); /* White with more blur transparency */
    --sticky-header-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
    --image-border-color: #dee2e6;
    --image-shadow: 0 2px 5px rgba(0,0,0,0.08);
    --image-hover-shadow: 0 5px 12px rgba(0,0,0,0.12);
    --entry-border-hover: var(--accent-color); /* Accent color for entry hover border */

    /* Dark Mode Overrides */
    --dark-bg-color: #1a1a1a; /* Slightly lighter dark bg */
    --dark-text-color: #e0e0e0;
    --dark-secondary-text-color: #a0a0a0; /* Increased contrast */
    --dark-link-color: #79b8ff; /* Brighter blue */
    --dark-link-hover-color: #a8d1ff;
    --dark-header-color: #ffffff;
    --dark-accent-color: #79b8ff; /* Match brighter blue */
    --dark-accent-color-light: #333333; /* Darker accent light */
    --dark-border-color: #404040; /* Slightly lighter dark border */
    --dark-container-bg: #242424;
    --dark-sidebar-bg: #212121; /* Slightly different dark */
    --dark-container-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); /* More pronounced dark shadow */
    --dark-button-bg: #383838;
    --dark-button-text: #f1f1f1;
    --dark-button-hover-bg: #4a4a4a;
    --dark-profile-pic-border: #555;
    --dark-tag-bg: #2c3e50; /* Dark blue-grey */
    --dark-tag-text: #a6d1ff; /* Light blue text */
    --dark-tag-border: #3f5169;
    --dark-tag-hover-bg: var(--dark-accent-color);
    --dark-tag-hover-text: #1a1a1a;
    --dark-tag-hover-border: var(--dark-accent-color);
    --dark-award-icon-color: #ffcc66; /* Brighter gold */
    --dark-separator-color: #383838;
    --dark-sticky-header-bg: rgba(30, 30, 30, 0.85); /* Darker with more blur transparency */
    --dark-sticky-header-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    --dark-image-border-color: #444;
    --dark-image-shadow: 0 2px 5px rgba(255,255,255,0.05);
    --dark-image-hover-shadow: 0 5px 12px rgba(255,255,255,0.1);
    --dark-entry-border-hover: var(--dark-accent-color); /* Accent color for entry hover border */


    /* Layout & Global */
    --sidebar-width: 300px;
    --content-gap: 35px;
    --main-content-padding: 45px;

    /* Transitions */
    --global-transition: color 0.3s ease, background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
    --transform-transition: transform 0.25s ease;
    --link-transition: color 0.2s ease, background-color 0.3s ease;
    --sticky-transition: background-color 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease, backdrop-filter 0.3s ease;
    --image-transition: var(--transform-transition), box-shadow 0.3s ease, border-color 0.3s ease;
    --entry-border-transition: border-left-color 0.3s ease;
}

/* Apply Theme Variables */
body {
    font-family: 'Lato', sans-serif;
    font-size: 16px;
    line-height: 1.7;
    background-color: var(--bg-color);
    color: var(--text-color);
    transition: var(--global-transition);
    overflow-x: hidden;
}


body.dark-mode {
    --bg-color: var(--dark-bg-color);
    --text-color: var(--dark-text-color);
    --secondary-text-color: var(--dark-secondary-text-color);
    --link-color: var(--dark-link-color);
    --link-hover-color: var(--dark-link-hover-color); /* Use the defined dark mode hover color */
    --header-color: var(--dark-header-color);
    --accent-color: var(--dark-accent-color);
    --accent-color-light: var(--dark-accent-color-light);
    --border-color: var(--dark-border-color);
    --container-bg: var(--dark-container-bg);
    --sidebar-bg: var(--dark-sidebar-bg);
    --container-shadow: var(--dark-container-shadow);
    --button-bg: var(--dark-button-bg);
    --button-text: var(--dark-button-text);
    --button-hover-bg: var(--dark-button-hover-bg);
    --profile-pic-border: var(--dark-profile-pic-border);
    --tag-bg: var(--dark-tag-bg);
    --tag-text: var(--dark-tag-text);
    --tag-border: var(--dark-tag-border);
    --tag-hover-bg: var(--dark-tag-hover-bg);
    --tag-hover-text: var(--dark-tag-hover-text);
    --tag-hover-border: var(--dark-tag-hover-border);
    --award-icon-color: var(--dark-award-icon-color);
    --separator-color: var(--dark-separator-color);
    --sticky-header-bg: var(--dark-sticky-header-bg);
    --sticky-header-shadow: var(--dark-sticky-header-shadow);
    --image-border-color: var(--dark-image-border-color);
    --image-shadow: var(--dark-image-shadow);
    --image-hover-shadow: var(--dark-image-hover-shadow);
    --entry-border-hover: var(--dark-entry-border-hover);
}

/* Page Wrapper Layout */
.page-wrapper {
    display: grid;
    max-width: 1350px;
    margin: 40px auto;
    padding: 0 25px;
    gap: var(--content-gap);
    grid-template-columns: var(--sidebar-width) 1fr;
    align-items: start;
}



/* Sidebar Styling */
.sidebar {
    background-color: var(--sidebar-bg);
    padding: 25px 30px; /*  Reduced top/bottom padding */
    border-radius: 12px;
    box-shadow: var(--container-shadow);
    border: 1px solid var(--border-color);
    position: sticky;
    top: 40px;
    transition: var(--global-transition), border-color 0.3s ease;
    /* height: calc(100vh - 80px); */ /* REMOVED: Let height be natural */
    max-height: calc(100vh - 80px); /* ADDED: Prevent growing beyond viewport */
    overflow-y: auto; /* ADDED: Add scroll ONLY if content STILL overflows after spacing reduction */
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
}

.sidebar header {
    text-align: center;
    margin-bottom: 20px; /*  Reduced margin */
    padding-bottom: 10px; /*  Reduced padding */
    border-bottom: 1px solid var(--separator-color);
    flex-shrink: 0;
}

.sidebar .profile-pic {
    width: 130px;
    height: 130px;
    border-radius: 50%;
    object-fit: cover;
    display: block;
    margin: 0 auto 15px auto; /*  Reduced bottom margin */
    border: 3px solid var(--profile-pic-border);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
    transition: var(--global-transition), border-color 0.3s ease;
    background-color: var(--border-color);
}

.sidebar h1 {
    font-family: 'Montserrat', sans-serif;
    font-size: 1.7em;
    font-weight: 700;
    color: var(--header-color);
    margin-bottom: 2px;
}
.sidebar h2 {
    font-size: 1.05em;
    font-weight: 400;
    color: var(--secondary-text-color);
    margin-bottom: 0;
}

.sidebar-section {
    margin-bottom: 20px; /*  Reduced margin */
    flex-shrink: 0;
}
.sidebar-section:last-of-type {
    margin-bottom: 0;
}

.sidebar-section h3 {
    font-family: 'Montserrat', sans-serif;
    font-size: 1.15em;
    font-weight: 600;
    color: var(--header-color);
    margin-bottom: 10px; /*  Reduced margin */
    padding-bottom: 5px; /*  Reduced padding */
    border-bottom: 2px solid var(--accent-color-light);
    display: flex;
    align-items: center;
}
.sidebar-section h3 i {
    margin-right: 10px;
    color: var(--accent-color);
    width: 18px;
    text-align: center;
}

/* Contact & Languages Lists */
.sidebar ul {
    list-style: none;
    padding-left: 5px;
}
.sidebar .contact-list li,
.sidebar .languages-list li {
     font-size: 0.95em;
     margin-bottom: 5px; /*  Reduced margin */
     color: var(--secondary-text-color);
     transition: color 0.2s ease;
}
.sidebar .contact-list li a { /* Style links within the list */
    color: var(--link-color); /*  Use the main link color by default */
    display: inline-flex; /* Changed from inline for better alignment */
    align-items: center;
    transition: var(--link-transition);
    font-weight: 400; /* Normal weight */
    position: relative; /* Keep this */
    /* padding-bottom: 2px; Add small padding if needed for underline spacing */
}
.sidebar .contact-list li a i {
    margin-right: 8px;
    width: 16px;
    text-align: center;
    color: var(--accent-color); /* Icon color still uses accent color */
    transition: color 0.2s ease;
}


.sidebar .contact-list li:hover {
/* Optional background change */
/* background-color: var(--accent-color-light); */
transform: translateX(3px); /* Subtle shift */
/* Ensure the link inside still gets its hover style */
}
/* Ensure transitions are defined on the base element */
.sidebar .contact-list li,
.sidebar .languages-list li {
transition: var(--global-transition), transform 0.2s ease-out; /* Add transform */
}



/* Override general sidebar link hover (if any conflicting) and set specific color */
.sidebar .contact-list li a:hover {
    color: var(--link-hover-color); /* Use the defined hover color */
    /* Optional: Change icon color on hover too */
    /* i { color: var(--link-hover-color); } */
}

/* Define the ::after pseudo-element for contact links (underline) */
.sidebar .contact-list li a::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 1.5px; /* Match main content link underline thickness */
    bottom: -3px; /* Position below text, adjust as needed */
    left: 0;
    background-color: var(--link-hover-color); /* Use hover color for the line */
    visibility: hidden;
    transform: scaleX(0);
    transition: all 0.3s ease-in-out; /* Animation */
    display: block; /* Crucial: Override the general '.sidebar a::after { display: none; }' */
}

/* Show and animate the underline on hover for contact links */
.sidebar .contact-list li a:hover::after {
    visibility: visible;
    transform: scaleX(1);
}


/* Sidebar Location Section - Pushed to Bottom */
.sidebar-location-section {
    margin-top: auto;
    padding-top: 20px; /*  Reduced padding */
    flex-shrink: 0;
}
.sidebar-location-section h3 {
    font-family: 'Montserrat', sans-serif;
    font-size: 1.15em;
    font-weight: 600;
    color: var(--header-color);
    margin-bottom: 10px; /*  Reduced margin */
    padding-bottom: 5px; /*  Reduced padding */
    border-bottom: 2px solid var(--accent-color-light);
    display: flex;
    align-items: center;
}
.sidebar-location-section h3 i {
    margin-right: 10px;
    color: var(--accent-color);
    width: 18px;
    text-align: center;
}
.sidebar-bottom-image {
    display: block;
    width: 100%;
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    box-shadow: var(--image-shadow);
    transition: var(--global-transition);
    margin-top: 5px;
    background-color: var(--border-color);
}

/* --- Main Content Styling --- */
.main-content {
    background-color: var(--container-bg);
    padding: 40px var(--main-content-padding);
    border-radius: 12px;
    box-shadow: var(--container-shadow);
    border: 1px solid var(--border-color);
    transition: var(--global-transition);
    position: relative;
    overflow: visible;
}

.main-content section {
    margin-bottom: 55px;
}
.main-content section:last-of-type {
    margin-bottom: 0;
}

/* Sticky Section Headers - Refined */
.main-content section h2 {
    font-family: 'Montserrat', sans-serif;
    font-size: 1.75em;
    font-weight: 700;
    color: var(--accent-color);
    margin-bottom: 30px;
    padding: 15px 0 12px 0;
    border-bottom: 3px solid var(--accent-color);
    display: flex;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 10;
    background-color: var(--sticky-header-bg);
    border-color: var(--accent-color);
    box-shadow: var(--sticky-header-shadow);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    margin-left: calc(-1 * var(--main-content-padding));
    margin-right: calc(-1 * var(--main-content-padding));
    padding-left: var(--main-content-padding);
    padding-right: var(--main-content-padding);
    width: calc(100% + 2 * var(--main-content-padding));
    box-sizing: border-box;
    transition: var(--sticky-transition);
}
.main-content section h2 i {
    margin-right: 15px;
    font-size: 0.9em;
}

/* Section Content Styling */
.main-content #about p {
    font-size: 1.1em;
    line-height: 1.8;
    text-align: justify;
    color: var(--text-color);
}

/* Animations */
.animated-section {
    opacity: 0;
    transform: translateY(25px);
    transition: opacity 0.7s ease-out, transform 0.7s ease-out;
}
.animated-section.visible {
    opacity: 1;
    transform: translateY(0);
}

/* Link Styling - Underline Animation */
a {
    color: var(--link-color);
    text-decoration: none;
    font-weight: 600;
    position: relative;
    transition: var(--link-transition);
}

/* General rule to disable underline for sidebar links */
.sidebar a::after { display: none; }

/* Specific rule for main content links to show underline */
.main-content a::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 1.5px;
    bottom: -3px;
    left: 0;
    background-color: var(--link-hover-color);
    visibility: hidden;
    transform: scaleX(0);
    transition: all 0.3s ease-in-out;
    /* display: block; - Implicitly block by other properties */
}

/* General hover behavior */
a:hover {
    color: var(--link-hover-color);
    text-decoration: none;
}

/* Specific hover for main content underline animation */
.main-content a:hover::after {
    visibility: visible;
    transform: scaleX(1);
}
.details a, .publication-list a, .project-description a { font-weight: 400; }

/* Research Interests List */
#research-interests .interests-list {
    list-style: none;
    padding-left: 5px;
    columns: 2;
    column-gap: 40px;
}
#research-interests .interests-list li {
    margin-bottom: 10px;
    break-inside: avoid-column;
    position: relative;
    padding-left: 20px;
    font-size: 1.05em;
}
#research-interests .interests-list li::before {
    content: "\f00c";
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    color: var(--accent-color);
    position: absolute;
    left: 0;
    top: 1px;
    font-size: 0.85em;
}

.education-entry {
    /* Ensure the entry itself creates a positioning context */
    position: relative;
    /* Ensure content is layered above the pseudo-element */
    z-index: 1;
     /* Optional: If logo overflows, hide it. Remove if causing issues. */
    overflow: hidden;
}

/* Common styles for the background pseudo-element */
.education-entry::before {
    content: ""; /* Required for pseudo-elements */
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-repeat: no-repeat;
    /* Center the background image */
    background-position: center center; /* Changed */
    /* Scale the image to fit without cropping */
    background-size: contain; /* Changed */
    /* Adjust opacity for desired "softness" - reduced slightly */
    opacity: 0.15; /* Adjusted */
    /* Place the pseudo-element behind the content */
    z-index: -1;
    /* Make it non-interactive */
    pointer-events: none;
     /* Smooth transition if you ever change logos/opacity */
    transition: opacity 0.3s ease, background-image 0.3s ease;
}

/* Specific logos, positions, and sizes */
.edu-sorbonne-eurecom::before {
    /* Multiple backgrounds: image1, image2 */
    background-image:url('images/sorbonne.png');
    /* Position: position for image1, position for image2 */
    /* Positions logos in the top-right corner, stacked vertically */
}

.edu-polytechnique::before {
    background-image: url('images/polytechnique-montreal.png');
    /* Position logo in the top-right corner */
}

.edu-telecom::before {
    background-image: url('images/ipparis.png');
    /* Position logo in the top-right corner */
}

/* Optional: Slightly dim the logo in dark mode if needed */
body.dark-mode .education-entry::before {
    opacity: 0.1; /* Further reduce opacity for dark mode */
}

/* Education & Project Entry Styling */
.education-entry, .project-entry {
    margin-bottom: 30px;
    padding-left: 20px;
    border-left: 4px solid var(--accent-color-light);
    transition: var(--entry-border-transition);
    position: relative;
}
.education-entry:hover, .project-entry:hover {
    border-left-color: var(--entry-border-hover);
}

.education-entry h3, .project-entry h3 {
    font-size: 1.35em;
    margin-bottom: 8px;
    color: var(--header-color);
    font-family: 'Montserrat', sans-serif;
}
.project-entry h3 {
     font-size: 1.25em;
     margin-bottom: 10px;
}

/* Institution/Location/Dates alignment */
.institution-location, .dates {
    font-size: 1em;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    color: var(--secondary-text-color);
}
.institution-location i, .dates i {
    margin-right: 10px;
    color: var(--accent-color);
    width: 16px;
    text-align: center;
    flex-shrink: 0;
}
.institution-location .location-icon {
    color: var(--accent-color);
    width: 16px;
    text-align: center;
    margin-left: 18px;
    margin-right: 6px;
}
.institution-location .institution-name {
    font-weight: 600;
    color: var(--text-color);
    margin-right: 5px;
}
.location-separator, .details-separator { display: none; }

.education-entry .details {
    font-size: 0.98em;
    color: var(--secondary-text-color);
    margin-top: 8px;
    line-height: 1.6;
}
.education-entry .details i.fa-user {
    margin-right: 8px;
    color: var(--accent-color);
    width: 16px;
    text-align: center;
    display: inline-block;
    margin-left: 10px;
}
.education-entry .details i.fa-user:first-of-type {
    margin-left: 0;
}
.details.description { margin-top: 12px; line-height: 1.65; }
.details.description p { margin-bottom: 8px; }
.details.description p:last-child { margin-bottom: 0; }

.details strong {
    color: var(--text-color);
    font-weight: 600;
}
.entry-separator {
    border: 0;
    height: 1px;
    background-color: var(--separator-color);
    margin: 35px 0;
}

/* Publication List Styling */
.publication-list li {
  margin-bottom: 30px;
  line-height: 1.65;
  display: flex;
  flex-direction: column;
  padding-left: 20px;
  border-left: 4px solid var(--accent-color-light);
  transition: var(--entry-border-transition);
}
.publication-list li:hover {
    border-left-color: var(--entry-border-hover);
}

.publication-list span { display: block; margin-bottom: 5px; }
.publication-title { font-size: 1.15em; font-weight: 700; color: var(--header-color); }
.authors { font-size: 0.95em; color: var(--secondary-text-color); }
.authors strong { color: var(--text-color); font-weight: 700; }
.venue { font-size: 0.95em; font-style: italic; color: var(--secondary-text-color); }
.links { margin-top: 8px; font-size: 0.9em; }
.links a { margin-right: 12px; font-weight: 600; }

.award-highlight {
  display: inline-block;
  margin-left: 10px;
  font-size: 0.8em;
  font-weight: 700;
  color: var(--award-icon-color);
  vertical-align: middle;
  white-space: nowrap;
}
.award-highlight i {
  margin-right: 5px;
  color: var(--award-icon-color);
}

#publications .note { font-size: 0.9em; font-style: italic; color: var(--secondary-text-color); margin-bottom: 25px; }

/* Awards List Styling */
.awards-list {
    list-style: none;
    padding-left: 5px;
}
.awards-list li {
    margin-bottom: 14px;
    display: flex;
    align-items: center;
    font-size: 1.05em;
}
.award-icon {
    color: var(--award-icon-color);
    margin-right: 15px;
    font-size: 1.3em;
    width: 24px;
    text-align: center;
    flex-shrink: 0;
}

/* Project Section Specifics */
.project-description {
    margin-bottom: 15px;
    color: var(--secondary-text-color);
    line-height: 1.65;
    font-size: 0.98em;
}
.project-description p { margin-bottom: 8px; }
.project-description p:last-child { margin-bottom: 0; }
.project-description.skills-used {
    margin-top: 20px;
    font-size: 0.95em;
}
.project-description.skills-used p {
    margin-bottom: 5px;
}

.project-screenshots {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-top: 15px;
    justify-content: center; /* ADDED: Center images horizontally */
}
.project-image {
    max-width: 400px;
    width: 100%;
    height: auto;
    border: 1px solid var(--image-border-color);
    border-radius: 8px;
    box-shadow: var(--image-shadow);
    transition: var(--image-transition);
    background-color: var(--border-color);
    cursor: pointer;
}
.project-image:hover {
    transform: scale(1.05);
    box-shadow: var(--image-hover-shadow);
    border-color: color-mix(in srgb, var(--accent-color) 50%, var(--image-border-color));
}
#projects .entry-separator {
    margin: 40px 0;
}

/* Skills Section */
#skills-main .skills-category { margin-bottom: 30px; }
#skills-main .skills-category h3 {
    font-family: 'Montserrat', sans-serif;
    font-size: 1.25em;
    font-weight: 600;
    color: var(--header-color);
    margin-bottom: 18px;
    display: flex;
    align-items: center;
}
#skills-main .skills-category h3 i {
    margin-right: 12px;
    color: var(--accent-color);
    width: 20px;
    text-align: center;
}
#skills-main .skills-tags { display: flex; flex-wrap: wrap; gap: 12px; }
#skills-main .skill-tag {
    background-color: var(--tag-bg);
    color: var(--tag-text);
    padding: 7px 15px;
    border-radius: 18px;
    font-size: 0.9em;
    font-weight: 500;
    border: 1px solid var(--tag-border);
    transition: var(--global-transition), var(--transform-transition);
    cursor: default;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    white-space: nowrap;
}
#skills-main .skill-tag:hover {
    transform: translateY(-3px) scale(1.03);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    background-color: var(--tag-hover-bg);
    color: var(--tag-hover-text);
    border-color: var(--tag-hover-border);
}
body.dark-mode #skills-main .skill-tag:hover {
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
}

/* Footer Styling */
footer {
    text-align: center;
    margin-top: 40px;
    padding: 25px var(--main-content-padding);
    border-top: 1px solid var(--separator-color);
    font-size: 0.95em;
    color: var(--secondary-text-color);
    transition: border-color 0.3s ease, color 0.3s ease;
    background-color: var(--container-bg);
    margin-left: calc(-1 * var(--main-content-padding));
    margin-right: calc(-1 * var(--main-content-padding));
    width: calc(100% + 2 * var(--main-content-padding));
    box-sizing: border-box;
    border-bottom-left-radius: 12px;
    border-bottom-right-radius: 12px;
}
footer p { margin-bottom: 0; }

/* Theme Toggle Button - Enhanced */
#theme-toggle {
    position: fixed;
    top: 25px;
    right: 25px;
    background-color: var(--button-bg);
    color: var(--button-text);
    border: 1px solid var(--border-color);
    border-radius: 50%;
    width: 44px;
    height: 44px;
    cursor: pointer;
    transition: var(--global-transition), var(--transform-transition);
    z-index: 1000;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.2em;
    padding: 0;
    overflow: hidden;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
}
#theme-toggle:hover {
    background-color: var(--button-hover-bg);
    transform: scale(1.1) rotate(15deg);
    box-shadow: 0 5px 12px rgba(0,0,0,0.15);
}
body.dark-mode #theme-toggle:hover {
    box-shadow: 0 5px 12px rgba(0, 0, 0, 0.4);
}
#theme-toggle:active {
    transform: scale(0.95);
    transition-duration: 0.1s;
}

/* Icon Visibility Logic */
#theme-toggle i { transition: transform 0.3s ease-out; }
body.light-mode #theme-toggle .icon-dark { display: inline-block; transform: rotate(0deg); }
body.light-mode #theme-toggle .icon-light { display: none; transform: rotate(-90deg); }
body.dark-mode #theme-toggle .icon-dark { display: none; transform: rotate(90deg); }
body.dark-mode #theme-toggle .icon-light { display: inline-block; transform: rotate(0deg); }

/* --- Lightbox Styles --- */
.lightbox {
    display: none;
    position: fixed;
    z-index: 1001;
    padding: 50px 20px 20px 20px;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.9);
    opacity: 0;
    transition: opacity 0.3s ease;
    align-items: center;
    justify-content: center;
}
.lightbox.active {
    display: flex;
    opacity: 1;
}
.lightbox-content {
    margin: auto;
    display: block;
    max-width: 90%;
    max-height: 90%;
    animation: lightboxZoom 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    object-fit: contain;
    border-radius: 4px;
}

@keyframes lightboxZoom {
    from {transform: scale(0.7); opacity: 0;}
    to {transform: scale(1); opacity: 1;}
}

.lightbox-close {
    position: absolute;
    top: 20px;
    right: 30px;
    color: #ccc;
    font-size: 45px;
    font-weight: bold;
    transition: 0.3s ease;
    cursor: pointer;
    line-height: 1;
    text-shadow: 0 1px 3px rgba(0,0,0,0.5);
}
.lightbox-close:hover,
.lightbox-close:focus {
    color: #fff;
    transform: scale(1.1);
}

/* --- Responsive Design Adjustments --- */

/* Tablet */
@media (max-width: 1100px) {
    :root {
        --sidebar-width: 270px;
        --content-gap: 30px;
        --main-content-padding: 40px;
    }
    .page-wrapper { max-width: 95%; padding: 0 20px; }
    .sidebar { padding: 25px; top: 25px; /* height: calc(100vh - 50px); */ /* REMOVED */ max-height: calc(100vh - 50px); /* Use max-height */ }
    .main-content { padding: 35px var(--main-content-padding); }
    .main-content section h2 { font-size: 1.65em; }
    .project-image { max-width: 180px; }
}

/* Small Tablet / Large Phone - Stack columns */
@media (max-width: 850px) {
    :root {
        --main-content-padding: 30px;
    }
    .page-wrapper {
        grid-template-columns: 1fr;
        margin: 0 auto;
        padding: 0;
        gap: 0;
        max-width: 100%;
    }
    .sidebar {
        position: static;
        height: auto; /*  Allow natural height */
        max-height: none; /*  Remove max-height */
        overflow-y: visible; /*  No scroll needed */
        border-radius: 0;
        border-left: none;
        border-right: none;
        border-top: none;
        margin-bottom: 0;
        padding-bottom: 30px;
    }
     .sidebar-location-section {
        margin-top: 25px; /*  Adjusted margin */
    }
    .main-content {
        border-radius: 0;
        border-left: none;
        border-right: none;
        border-bottom: none;
        padding: 30px var(--main-content-padding);
    }

    /* Sticky header RESET */
     .main-content section h2 {
        position: static;
        box-shadow: none;
        backdrop-filter: none;
        -webkit-backdrop-filter: none;
        background-color: transparent;
        width: auto;
        margin-left: 0;
        margin-right: 0;
        padding-left: 0;
        padding-right: 0;
        padding-top: 0;
        border-bottom: 3px solid var(--accent-color);
        margin-bottom: 25px;
        padding-bottom: 10px;
        font-size: 1.5em;
    }
     #research-interests .interests-list { columns: 1; }
     .project-screenshots { gap: 10px; }
     .project-image { max-width: calc(50% - 5px); }

     footer {
        margin-left: 0;
        margin-right: 0;
        width: 100%;
        border-radius: 0;
        padding-left: var(--main-content-padding);
        padding-right: var(--main-content-padding);
     }
}

/* Mobile Phone */
@media (max-width: 576px) {
     :root {
        --main-content-padding: 20px;
     }
     body { font-size: 15px; line-height: 1.65; }
     .sidebar, .main-content {
        padding: 25px var(--main-content-padding);
    }
    .sidebar header { margin-bottom: 20px; padding-bottom: 10px; }
    .sidebar .profile-pic { width: 110px; height: 110px; }
    .sidebar h1 { font-size: 1.5em; }
    .sidebar h2 { font-size: 1.0em; }

    .main-content section { margin-bottom: 35px; }
    .main-content section h2 { font-size: 1.4em; }

    .education-entry, .project-entry, .publication-list li {
        padding-left: 15px;
        border-left-width: 3px;
    }
    #research-interests .interests-list li { padding-left: 18px; }
    .skill-tag { padding: 6px 12px; font-size: 0.85em; }
    .project-image { max-width: 100%; } /* Stack images */

     #theme-toggle {
        width: 40px;
        height: 40px;
        font-size: 1.1em;
        top: 15px;
        right: 15px;
    }
    footer { padding-top: 20px; padding-bottom: 20px;}
}
